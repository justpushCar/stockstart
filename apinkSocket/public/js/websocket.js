var Socket=function(config){
	this.config(config);
}

Socket.prototype={
	config:function(config){
		this.url=config.url;
		this.callbacks={};
	},
	run:function(){
		var _this=this;
		this.websocket=new WebSocket(this.url);
		this.websocket.onopen=function(){
	    	console.log("连接成功");
	    	//var data='{"caozuo":"ready","data":[{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":150,"y":210},{"flag":1,"key":"ChoRong1","img":"public/images/Apink_3/ChoRong1.jpg","x":210,"y":210},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":270,"y":210},{"flag":1,"key":"NamJoo2","img":"public/images/Apink_3/NamJoo2.jpg","x":330,"y":210},{"flag":1,"key":"NaEun2","img":"public/images/Apink_3/NaEun2.jpg","x":390,"y":210},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":450,"y":210},{"flag":1,"key":"NamJoo1","img":"public/images/Apink_3/NamJoo1.jpg","x":510,"y":210},{"flag":1,"key":"EunJi3","img":"public/images/Apink_3/EunJi3.jpg","x":570,"y":210},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":630,"y":210},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":690,"y":210},{"flag":1,"key":"BoMi3","img":"public/images/Apink_3/BoMi3.jpg","x":30,"y":270},{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":150,"y":210},{"flag":1,"key":"ChoRong1","img":"public/images/Apink_3/ChoRong1.jpg","x":210,"y":210},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":270,"y":210},{"flag":1,"key":"NamJoo2","img":"public/images/Apink_3/NamJoo2.jpg","x":330,"y":210},{"flag":1,"key":"NaEun2","img":"public/images/Apink_3/NaEun2.jpg","x":390,"y":210},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":450,"y":210},{"flag":1,"key":"NamJoo1","img":"public/images/Apink_3/NamJoo1.jpg","x":510,"y":210},{"flag":1,"key":"EunJi3","img":"public/images/Apink_3/EunJi3.jpg","x":570,"y":210},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":630,"y":210},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":690,"y":210},{"flag":1,"key":"BoMi3","img":"public/images/Apink_3/BoMi3.jpg","x":30,"y":270},{"flag":1,"key":"EunJi3","img":"public/images/Apink_3/EunJi3.jpg","x":90,"y":270},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":150,"y":270},{"flag":1,"key":"ChoRong2","img":"public/images/Apink_3/ChoRong2.jpg","x":210,"y":270},{"flag":1,"key":"BoMi3","img":"public/images/Apink_3/BoMi3.jpg","x":270,"y":270},{"flag":1,"key":"BoMi3","img":"public/images/Apink_3/BoMi3.jpg","x":330,"y":270},{"flag":1,"key":"ChoRong3","img":"public/images/Apink_3/ChoRong3.jpg","x":390,"y":270},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":450,"y":270},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":510,"y":270},{"flag":1,"key":"NaEun3","img":"public/images/Apink_3/NaEun3.jpg","x":570,"y":270},{"flag":1,"key":"NamJoo3","img":"public/images/Apink_3/NamJoo3.jpg","x":630,"y":270},{"flag":1,"key":"NaEun2","img":"public/images/Apink_3/NaEun2.jpg","x":690,"y":270},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":30,"y":330},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":90,"y":330},{"flag":1,"key":"BoMi1","img":"public/images/Apink_3/BoMi1.jpg","x":150,"y":330},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":210,"y":330},{"flag":1,"key":"NaEun3","img":"public/images/Apink_3/NaEun3.jpg","x":270,"y":330},{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":330,"y":330},{"flag":1,"key":"ChoRong2","img":"public/images/Apink_3/ChoRong2.jpg","x":390,"y":330},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":450,"y":330},{"flag":1,"key":"BoMi3","img":"public/images/Apink_3/BoMi3.jpg","x":510,"y":330},{"flag":1,"key":"EunJi3","img":"public/images/Apink_3/EunJi3.jpg","x":570,"y":330},{"flag":1,"key":"BoMi3","img":"public/images/Apink_3/BoMi3.jpg","x":630,"y":330},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":690,"y":330},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":30,"y":390},{"flag":1,"key":"NamJoo3","img":"public/images/Apink_3/NamJoo3.jpg","x":90,"y":390},{"flag":1,"key":"NaEun3","img":"public/images/Apink_3/NaEun3.jpg","x":150,"y":390},{"flag":1,"key":"BoMi3","img":"public/images/Apink_3/BoMi3.jpg","x":210,"y":390},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":270,"y":390},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":330,"y":390},{"flag":1,"key":"NamJoo2","img":"public/images/Apink_3/NamJoo2.jpg","x":390,"y":390},{"flag":1,"key":"ChoRong3","img":"public/images/Apink_3/ChoRong3.jpg","x":450,"y":390},{"flag":1,"key":"ChoRong3","img":"public/images/Apink_3/ChoRong3.jpg","x":510,"y":390},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":570,"y":390},{"flag":1,"key":"NamJoo3","img":"public/images/Apink_3/NamJoo3.jpg","x":630,"y":390},{"flag":1,"key":"ChoRong3","img":"public/images/Apink_3/ChoRong3.jpg","x":690,"y":390},{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":30,"y":450},{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":90,"y":450},{"flag":1,"key":"ChoRong3","img":"public/images/Apink_3/ChoRong3.jpg","x":150,"y":450},{"flag":1,"key":"NamJoo3","img":"public/images/Apink_3/NamJoo3.jpg","x":210,"y":450},{"flag":1,"key":"ChoRong2","img":"public/images/Apink_3/ChoRong2.jpg","x":270,"y":450},{"flag":1,"key":"HaYoung1","img":"public/images/Apink_3/HaYoung1.jpg","x":330,"y":450},{"flag":1,"key":"NamJoo2","img":"public/images/Apink_3/NamJoo2.jpg","x":390,"y":450},{"flag":1,"key":"ChoRong3","img":"public/images/Apink_3/ChoRong3.jpg","x":450,"y":450},{"flag":1,"key":"NamJoo3","img":"public/images/Apink_3/NamJoo3.jpg","x":510,"y":450},{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":570,"y":450},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":630,"y":450},{"flag":1,"key":"EunJi3","img":"public/images/Apink_3/EunJi3.jpg","x":690,"y":450},{"flag":1,"key":"NaEun3","img":"public/images/Apink_3/NaEun3.jpg","x":30,"y":510},{"flag":1,"key":"EunJi3","img":"public/images/Apink_3/EunJi3.jpg","x":90,"y":510},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":150,"y":510},{"flag":1,"key":"NamJoo2","img":"public/images/Apink_3/NamJoo2.jpg","x":210,"y":510},{"flag":1,"key":"NaEun2","img":"public/images/Apink_3/NaEun2.jpg","x":270,"y":510},{"flag":1,"key":"HaYoung1","img":"public/images/Apink_3/HaYoung1.jpg","x":330,"y":510},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":390,"y":510},{"flag":1,"key":"BoMi1","img":"public/images/Apink_3/BoMi1.jpg","x":450,"y":510},{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":510,"y":510},{"flag":1,"key":"ChoRong3","img":"public/images/Apink_3/ChoRong3.jpg","x":570,"y":510},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":630,"y":510},{"flag":1,"key":"BoMi1","img":"public/images/Apink_3/BoMi1.jpg","x":690,"y":510},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":30,"y":570},{"flag":1,"key":"NaEun3","img":"public/images/Apink_3/NaEun3.jpg","x":90,"y":570},{"flag":1,"key":"BoMi2","img":"public/images/Apink_3/BoMi2.jpg","x":150,"y":570},{"flag":1,"key":"NaEun3","img":"public/images/Apink_3/NaEun3.jpg","x":210,"y":570},{"flag":1,"key":"BoMi1","img":"public/images/Apink_3/BoMi1.jpg","x":270,"y":570},{"flag":1,"key":"ChoRong2","img":"public/images/Apink_3/ChoRong2.jpg","x":330,"y":570},{"flag":1,"key":"EunJi1","img":"public/images/Apink_3/EunJi1.jpg","x":390,"y":570},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":450,"y":570},{"flag":1,"key":"HaYoung2","img":"public/images/Apink_3/HaYoung2.jpg","x":510,"y":570},{"flag":1,"key":"HaYoung1","img":"public/images/Apink_3/HaYoung1.jpg","x":570,"y":570},{"flag":1,"key":"NamJoo3","img":"public/images/Apink_3/NamJoo3.jpg","x":630,"y":570},{"flag":1,"key":"NaEun1","img":"public/images/Apink_3/NaEun1.jpg","x":690,"y":570}]}';
                      //console.log(data.length);
                      //_this.websocket.send(data);
	    }
		this.websocket.onmessage = function(e){
			var data=e.data;
			data=JSON.parse(data);
			_this.callbacks[data.caozuo](data);
    	}
		this.websocket.onerror = function(e){
			console.log("error");
    	}
          this.websocket.onclose = function (event) {
                  console.log('webSocket close');
               };
	},
	/*添加回调函数*/
	add_callback:function(name,callback){
		this.callbacks[name]=callback;
	},
    send:function(data){
    	var a=this.websocket.send(data);
    },
}